<!-- Recite Me : -->
<style>
#reciteme-button {
 /* Button Styling and Placement */
 background: #00344c;
 width: 65px;
 height: 65px;
 bottom: 14px;
 right: 14px;

 position: fixed;
 border-radius: 50%;
 z-index: 100;
 cursor: pointer;
}

@media (max-width: 991.98px) {
 #reciteme-button {
 bottom: 80px;
 }
}


#reciteme-button:hover {
 /* Hover Color */
 background: #e9322e;
}

#reciteme-button img {
 /** Button Image Size */
 width: 45px;
 height: 45px;

 position: absolute;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
}
</style>
<script>
    var serviceUrl = "//api.reciteme.com/asset/js?key=";
    var serviceKey = "c039953112dab039667ac5b489894e1428c7fbea";
    var buttonSrc = 'https://gotafe.trainingvc.com.au/pluginfile.php/1/tool_themeassets/assets/0/reciteme_button.png';
    var options = { "Tracker": {
        "Ga": {
            "enabled": true,
            "trackerName": "G-Z9BZDWFDR9"
        }
    }
}
    var autoLoad = false;
    var enableFragment = "#reciteEnable";
    var loaded = [], frag = !1; window.location.hash === enableFragment && (frag = !0); function loadScript(c, b) { var a = document.createElement("script"); a.type = "text/javascript"; a.readyState ? a.onreadystatechange = function () { if ("loaded" == a.readyState || "complete" == a.readyState) a.onreadystatechange = null, void 0 != b && b() } : void 0 != b && (a.onload = function () { b() }); a.src = c; document.getElementsByTagName("head")[0].appendChild(a) } function _rc(c) { c += "="; for (var b = document.cookie.split(";"), a = 0; a < b.length; a++) { for (var d = b[a]; " " == d.charAt(0);)d = d.substring(1, d.length); if (0 == d.indexOf(c)) return d.substring(c.length, d.length) } return null } function loadService(c) { for (var b = serviceUrl + serviceKey, a = 0; a < loaded.length; a++)if (loaded[a] == b) return; loaded.push(b); loadScript(serviceUrl + serviceKey, function () { "function" === typeof _reciteLoaded && _reciteLoaded(); "function" == typeof c && c(); Recite.load(options); Recite.Event.subscribe("Recite:load", function () { Recite.enable() }) }) } "true" == _rc("Recite.Persist") && loadService(); if (autoLoad && "false" != _rc("Recite.Persist") || frag) document.addEventListener ? document.addEventListener("DOMContentLoaded", function (c) { loadService() }) : loadService();

    // Floating Button:
    function _reciteLoaded() {
        if (reciteMeButton && reciteMeButton.parentNode) {
            reciteMeButton.parentNode.removeChild(reciteMeButton); 
        }
    }

    var reciteMeButton;
    function _createReciteButton() {
        var buttonParentSelector = 'body';
        var buttonContainer = document.createElement("div");
        var buttonImage = document.createElement("img");
        var buttonAlt = "Recite Me accessibility and Language Support";
        var buttonTitle = "Launch Recite Me";

        buttonContainer.setAttribute('id', 'reciteme-button');
        buttonContainer.setAttribute('alt', buttonAlt);
        buttonContainer.setAttribute('title', buttonTitle);
        buttonImage.setAttribute('alt', buttonAlt);
        buttonImage.setAttribute('title', buttonTitle);
        buttonImage.setAttribute('src', buttonSrc);
        buttonContainer.appendChild(buttonImage);
        var buttonParent = document.querySelector(buttonParentSelector);
        buttonParent.appendChild(buttonContainer);
        buttonContainer.addEventListener("click", function () {
            loadService();
            return false;
        });
        reciteMeButton = buttonContainer;
    }
    _createReciteButton();
</script>

<!-- Kaltura ---To add all of this, in the site administration menu, go to appearance -> additional html and paste the following snippet in the "before body is closed" area : -->

<script>
var urlParams = new URLSearchParams(window.location.search);
var courseId = urlParams.get("id");
var mmUrl = "/local/mymedia/mymedia.php";
var mmText = "My Media";
var cmUrl = "/local/kalturamediagallery/index.php?courseid="+courseId;
var cmText = "Media Gallery";
var kIcon = "https://cfvod.kaltura.com/p/2249861/sp/224986100/thumbnail/entry_id/1_b0stc92t/def_height/480/def_width/640/version/100001/type/1";

function createKalturaLink(q,l,t,os){
    // Init Open LMS Suggested Fix
    var li = document.createElement("li");
    // End Open LMS Suggested Fix
var a = document.createElement("a");
a.id=q;
a.href=l;
if (os){
a.insertAdjacentElement("afterbegin", os);
}
a.appendChild(document.createTextNode(t));
    // Init Open LMS Suggested Fix
    li.appendChild(a);
    return li;
    // End Open LMS Suggested Fix
return a;
}

function createKalturaIcon(){
var a = document.createElement("IMG");
a.src=kIcon;
a.setAttribute("class", "svg-icon");
a.setAttribute("role", "presentation");
return a;
}


//create course dashboard Link
var courseTools = document.getElementById("coursetools-list");
if(courseTools){
var cmLink = createKalturaLink("ct-kaltura",cmUrl,cmText,createKalturaIcon());
courseTools.insertAdjacentElement("beforeend",cmLink);
}

</script>



<script src="https://code.jquery.com/jquery.js"></script>
<script>
/*
 *  @Author   : Greg Bird (@BirdyOz, greg.bird.oz@gmail.com)
 *  @Created  : 2017-03-31 13:08:18
 *  @Modified : 2017-10-11 08:02:39
 */


/*
 *
 * This script dymanically builds a Moodle course banner to include:
 *   - Dynamic branding (logos) - This removes the requirement for 5 separate themes (Main, Course, NCEE, NCDE, HR)
 *   - Descriptive title
 *   - Code(s)
 *   - Year
 *   - Audience (if provided)
 *   - A badge to indicate the site is in development (if appropriate)
 */


// Ensure that jQuery does not conflict with any Moodle code
$.noConflict();
jQuery(document).ready(function($) {
    // $(document).ready(function() {
    // Define global variables
    var logo, codes_array, details_array, code_text, title_text, audience_text, audience_name, year_text = "";

    //Set default branding logo to 'Main'
    $('header#page-header').addClass("Main");


    // Extract breadcrumbs.  Create an array.  Only select items from breadcrumbs which refer to categories.
    var breadcrumbs = $("ul.breadcrumb a[href*='categoryid'] span[itemprop='title']");

    // Loop through the breadcrumbs, looking for sub-branding
    $(breadcrumbs).each(function() {
        var breadcrumb = $(this).text();

        // Convert breadcrumb into "slug", then add class to #page-header.
        // This will allow for more granular sub-branding, once banner images have been developed

        var breadcrumb_class = "breadcrumbs-" + slugify(breadcrumb);
        $('header#page-header').addClass(breadcrumb_class);
    });



    // Extract course short description from breadcrumbs.  It is the current banner header
    var description = $('.page-header-headings > h1').text();

    // This regex pattern matches the GOTAFE 2017 course naming convention
    //  UNIT CODE: Unit Title ([Audience, ]Year)
    //      OR
    //  UNIT CODE 1 | UNIT CODE 2 | UNIT CODE 3: Cluster Title([Audience, ]Year)
    //
    // Examples:
    //  HLTEN511B: Provide nursing care for clients requiring palliative care (2016)
    //  AHCHBR203A: Provide daily care for horses (VETIS, 2016)
    //  SITXMPR501: Obtain and manage sponsorship (Hosp, 2016)
    //  BSBWOR502A: Ensure Team Effectiveness (ID16)
    //  AHCWRK502A | AHCWRK503A: Reports & Data Cluster 1 (Wine, ID17)
    //
    // Capture groups:
    // /^(.*)\:(.*)\((.*)\)
    //    $1    $2    $3
    //  $1 - Code(s)
    //  $2 - Descriptive title
    //  $3 - Audience (if defined) & Year

    var re = /^(.*)\:(.*)\((.*)\)/gi;
    var TitleArray = re.exec(description);


    // Only parses title if it matches the naming convention; ie it matches the pattern defined by the regex
    // This is to avoid unnecessary processing of descriptions that do not match the naming convention
    if (TitleArray) {

        // Extract codes_array
        codes_array = TitleArray[1].split("|").sort();
        // Trim whitespace
        codes_array = $.map(codes_array, function(value) {
            return value.trim();
        });

        // For each code, add class to #page-header.
        // This will allow for more granular sub-branding, once banner images have been developed
        $.each(codes_array, function(index, val) {
            var code_class = "code-" + slugify(val);
            $('header#page-header').addClass(code_class);
        });

        // If there is more than one code
        if (codes_array.length === 1) {
            // Single Unit of Comptency
            code_text = "<div id =\"codes\"><span>Code: <\/span>" + codes_array + "<\/div>";

        } else {
            // Cluster of 2 or more units
            // concatenate with ", ".  Use " & " before the last code
            code_text = "<div id =\"codes\"><span>Codes: <\/span>" + codes_array.slice(0, codes_array.length - 1).join(", ") + " & " + codes_array[codes_array.length - 1] + "<\/div>";
        }
        // Append below banner heading
        $('.page-header-headings').append(code_text);

        // Extract descriptive title
        title_text = TitleArray[2].trim();

        // Update banner heading, to match descriptive title
        $('.page-header-headings > h1').text(title_text);

        // Extract year and audience
        details_array = TitleArray[3].split(",");
        details_array = $.map(details_array, function(value) {
            return value.trim();
        });

        // Separate out year from audience
        if (details_array.length === 1) {
            year_text = details_array[0];
        } else {
            // If there is an audience, add it to the banner
            audience_str = details_array.slice(0, details_array.length - 1).join(", ");

            // Get the friendly name for this audience
            if (audience_str.indexOf('-') !== -1) {
                audience_name = "";
                audience_arr = audience_str.split("-");
                audience_newarr = [];
                $.each(audience_arr, function(index, val) {
                    var friendly = friendlyname(val);
                    audience_newarr.push(friendly);
                    // audience_name = audience_name + friendly + ", ";
                });
                audience_name = audience_newarr.join(", ");
            } else {
                audience_name = friendlyname(audience_str);
            }

            console.log("@GB: audience_name = ", audience_name);
            audience_text = "<div id =\"audience\"><span>Audience: <\/span>" + audience_name + "<\/div>";
            $('.page-header-headings').append(audience_text);

            // Add 'Audience' class to #page-header.
            var audience_class = "audience-" + slugify(audience_str);
            $('header#page-header').addClass(audience_class);
            year_text = details_array[details_array.length - 1];
        }

        // Update Page Headings to prepend year.  Add as a bootstrap panel
        $('.page-header-headings').prepend("<div id =\"year\" class=\"panel pull-right text-center\"> <div class=\"panel-body \">" + year_text + "<\/div>");

        // Add 'Year' class to #page-header.
        var year_class = "year-" + slugify(year_text);
        $('header#page-header').addClass(year_class);

        // Is this subject 'In Development'?
        if (year_text.substring(0, 2) === "ID") {
            // Add footer to 'Year' panel
            $('#year').prepend("<div class=\"panel-heading\">In Development<\/div>");
            $('#year').addClass("panel-danger");
        }

        // Is this subject 'In Development'?
        if (year_text.substring(0, 2) === "LD") {
            // Add footer to 'Year' panel
            $('#year').prepend("<div class=\"panel-heading\">Learning Development<\/div>");
            $('#year').addClass("panel-danger");
        }

        // Is this subject 'In Development'?
        if (year_text.substring(0, 2) === "SP") {
            // Add footer to 'Year' panel
            $('#year').prepend("<div class=\"panel-heading\">Staff Sandpit<\/div>");
            $('#year').addClass("panel-danger");
        }


        // DEBUG ONLY - IF TEST BANNER
        if (year_text.substring(0, 2) === "TB") {
            // Add footer to 'Year' panel
            $('#year').prepend("<div class=\"panel-heading\">TEST BANNER<\/div>");
            $('#year').addClass("panel-danger");
            // add test-banner to #page to allow for selective addition of custom banners
            $('#page').addClass("test-banner");
        }
    }

    // Change title of ReadSpeaker Block
    $('.block_readspeaker_embhl .title h2').text("Listen to this page");

    // Add additional instructions to the ReadSpeaker block
    $('.block_readspeaker_embhl>.content').append("<small>Highlight the text that you would like to hear, then click the 'play' button. <br> <a  target=\"_blank\" href=\"https://youtu.be/6RpliafTRDI\">(Watch a tutorial)</a> </small>");

    // My Grades interface only.  Change Hyphens ("-") to "Incomplete"
    // if (window.location.pathname === "/grade/report/overview/index.php") {
    //     console.log("@GB: window.location.pathname = ", window.location.pathname);
    //     $(".cell.c1").filter(function() {
    //         return $(this).text() === "-";
    //     }).text('Incomplete');
    // } else {}
});


function slugify(text) {
    // https://gist.github.com/mathewbyrne/1280286
    return text.toString().toLowerCase()
        .replace(/\s+/g, '-') // Replace spaces with -
        .replace(/[^\w\-]+/g, '') // Remove all non-word chars
        .replace(/\-\-+/g, '-') // Replace multiple - with single -
        .replace(/^-+/, '') // Trim - from start of text
        .replace(/-+$/, '') // Trim - from end of text
        .replace(/[\s_-]+/g, '-');
}

function friendlyname(text) {
    // Translate audience abbreviations into human readable alternatives
    var shortname = slugify(text);
    var longname = "";
    var audiences = {
        "ag": "Agriculture",
        "agedcare": "Aged Care",
        "allhlth": "Allied Health",
        "ansci": "Animal Sciences",
        "auto": "Automotive",
        "bake": "Bakery",
        "beauty": "Beauty",
        "build": "Building and Construction",
        "bus": "Business",
        "cab": "Cabinet Making",
        "carptry": "Carpentry",
        "childserv": "Childrens Services",
        "clm": "Conservation and Land Management",
        "comserv": "Community Services",
        "csu": "Charles Sturt University",
        "dairy": "Dairy",
        "design": "Design",
        "elec": "Electrical",
        "edsupt": "Education Support",
        "foodpro": "Food Production",
        "gamedev": "Game Development",
        "gened": "General Education",
        "glass": "Glass",
        "hair": "Hairdressing",
        "hort": "Horticulture",
        "hosp": "Hospitality",
        "hydropon": "Hydroponics",
        "it": "Information Technology",
        "jnry": "Joinery",
        "learndev": "Learning and Development",
        "lsu": "Learning Skills Unit",
        "ncee": "NCEE",
        "nurse": "Nursing",
        "plumb": "Plumbing",
        "rec": "Outdoor Recreation",
        "sport": "Sport",
        "tourism": "Tourism",
        "trainassess": "Training and Assessment",
        "vit": "Viticulture",
        "voc": "Vocational",
        "wine": "Winemaking"
    };
    if (shortname in audiences) {
        longname = audiences[shortname];
    } else {
        longname = text;
    }
    return longname;
}
</script>
<script>
$(".attempthistory .advancedgrade").parent().contents().filter(function(){
    return (this.nodeType == 3);
}).remove();
</script>


<script>

// TOGGLE PASSWORD VISIBILITY
$(document).ready(function() {
    if (window.location.href.indexOf("https://gotafe.trainingvc.com.au/login/index.php") > -1) {
        $(".snap-custom-form #password").after('<div style="display:inline-block; width:200px; margin-top: 15px; font-size: 0.95rem!important;"><input type="checkbox" id="boxShowPassword" onclick="togglePasswordVisibility()"><label for="boxShowPassword">&nbsp; Show password</label></div>');
        $(".snap-custom-form input#password").css("color","#000");
    }
});
function togglePasswordVisibility() {
    if ( $(".snap-custom-form input#password").attr('type') == 'password' ) {
        $(".snap-custom-form input#password").attr("type","text");
        $(".snap-custom-form input#password").css("width","400px");
    } else {
        $(".snap-custom-form input#password").attr("type","password");
        $(".snap-custom-form input#password").css("border","1px solid #8f959e");
        $(".snap-custom-form input#password").css("font-size","initial");
        var inputBoxWidth = $(".snap-custom-form").width();
        $(".snap-custom-form input#password").css("width",inputBoxWidth);
    }
}
</script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMG3HVC"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->